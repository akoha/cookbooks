#
# Chef Server Config File
#
# Dynamically generated by Chef - local modifications will be replaced

log_level          :info
log_location       <%= @server_log %>
ssl_verify_mode    :verify_none
registration_url   "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
template_url       "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
remotefile_url     "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
search_url         "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
role_url           "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
chef_server_url    "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
client_url         "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
chef_server_url    "<%= @node[:bootstrap][:chef][:url_type] %>://<%= @node[:bootstrap][:chef][:server_fqdn] %>:<%= @node[:bootstrap][:chef][:server_port] %>"
signing_ca_path    "<%= @node[:bootstrap][:chef][:path] %>/ca"
couchdb_database   'chef'

cookbook_path      [ "<%= @node[:bootstrap][:chef][:serve_path] %>/cookbooks", "<%= @node[:bootstrap][:chef][:serve_path] %>/site-cookbooks" ]

file_cache_path    "<%= @node[:bootstrap][:chef][:cache_path] %>"
node_path          "<%= @node[:bootstrap][:chef][:serve_path] %>/nodes"
openid_store_path  "<%= @node[:bootstrap][:chef][:path] %>/openid/store"
openid_cstore_path "<%= @node[:bootstrap][:chef][:path] %>/openid/cstore"
search_index_path  "<%= @node[:bootstrap][:chef][:path] %>/search_index"
role_path          "<%= @node[:bootstrap][:chef][:serve_path] %>/roles"

validation_client_name "validator"
validation_key   "/etc/chef/validation.key"
client_key       "/etc/chef/client.pem"
web_ui_client_name "chef-webui"
web_ui_key "/etc/chef/webui.pem"
supportdir = "<%= @node[:bootstrap][:chef][:path] %>/support"
solr_jetty_path File.join(supportdir, "solr", "jetty")
solr_heap_size "250M"
solr_data_path File.join(supportdir, "solr", "data")
solr_home_path File.join(supportdir, "solr", "home")
solr_heap_size "256M"
umask <%= @node[:bootstrap][:chef][:umask] %>

# See http://wiki.opscode.com/display/chef/Securing+Chef+Server
# For more information on these settings.
#authorized_openid_providers   [ "https://<%= @node[:bootstrap][:chef][:server_fqdn]%>", "https://chef", "myopenid.com" ]
#authorized_openid_identifiers [ "" ]

Mixlib::Log::Formatter.show_time = <%= @show_time %>
